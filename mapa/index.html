<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Map Interface</title>
    
    <!-- Leaflet Core -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Leaflet Plugins CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol/dist/L.Control.Locate.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.fullscreen@1.6.0/Control.FullScreen.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
    <link rel="stylesheet" href="https://ppete2.github.io/Leaflet.PolylineMeasure/Leaflet.PolylineMeasure.css" />
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    
    <!-- Google Maps API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBhEzOwRvJvhErLNOI1uhEHnTwJB3bFFeI"></script>
    
    <!-- Core Leaflet -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Leaflet Plugins JS - Order matters! -->
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol/dist/L.Control.Locate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet.fullscreen@1.6.0/Control.FullScreen.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
    <script src="https://ppete2.github.io/Leaflet.PolylineMeasure/Leaflet.PolylineMeasure.js"></script>
    <script src="https://leaflet.github.io/Leaflet.heat/dist/leaflet-heat.js"></script>
    
    <!-- Export Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <!-- H3 -->
    <script src="https://unpkg.com/h3-js@4.1.0/dist/h3-js.umd.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/sidebarleft.css">
    <link rel="stylesheet" href="css/components/layerTree.css">
    <link rel="stylesheet" href="css/components/opacityControl.css">
    <link rel="stylesheet" href="css/stylecontrollayer.css">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="stylesheet" href="css/popup.css">
    <link rel="stylesheet" href="css/leaflet-draw-theme.css">
    <link rel="stylesheet" href="css/map-controls.css">
    <link rel="stylesheet" href="css/wfs/layers.css">
    <link rel="stylesheet" href="css/components/filterBar.css">
    <link rel="stylesheet" href="css/components/symbologyTable.css">
    <link rel="stylesheet" href="css/components/mapExport.css">
    <link rel="stylesheet" href="css/components/pointsExport.css">
    <link rel="stylesheet" href="css/components/dashboardPanel.css">
    <link rel="stylesheet" href="css/components/stateManager.css">
    <link rel="stylesheet" href="css/components/styleEditor.css">
    <link rel="stylesheet" href="css/components/styleMode.css">
    <link rel="stylesheet" href="css/components/locationSelector.css">
    <link rel="stylesheet" href="css/components/streetView.css">
    <link rel="stylesheet" href="css/welcome.css">
    <link rel="stylesheet" href="css/components/locationHighlight.css">
    <link rel="stylesheet" href="css/components/pointsList.css">
    <link rel="stylesheet" href="css/components/uploadDropdown.css">
</head>
<body data-theme="light">

    <!-- Welcome Screen -->
    <div class="welcome-overlay">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
        <div class="shape shape-5"></div>
        <div class="shape shape-6"></div>
        <div class="welcome-content">
            <img src="https://soymetrix.com/demo/public/files/images/logo-dark.png?t=1741632147" alt="Logo Metrix" class="welcome-logo">
            <h1 class="welcome-title">Bienvenido a Metrix</h1>
            <p class="welcome-description">
                Sistema integral de gesti√≥n y visualizaci√≥n de datos geoespaciales para el monitoreo urbano, catastral y de infraestructura. Explore, analice y gestione informaci√≥n territorial de manera eficiente.
            </p>
            <button class="welcome-button" id="enter-button">COMENZAR</button>
        </div>
    </div>

    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-content">
            <div class="flex items-center">
                <img src="https://soymetrix.com/demo/public/files/images/logo-dark.png?t=1741632147" alt="Logo" class="logo">
            </div>
            <div class="flex items-center gap-4">
                <button id="streetViewToggle" class="control-btn" title="Street View">
                    <i class="bi bi-person-walking"></i>
                </button>
                <button id="hexagonToggle" class="control-btn" title="Toggle Hexagons">
                    <i class="bi bi-hexagon"></i>
                </button>
                <button id="heatmapToggle" class="control-btn" title="Toggle Heatmap">
                    <i class="bi bi-fire"></i>
                </button>
                <button id="themeToggle" class="control-btn" title="Toggle Theme">
                    <span class="icon">üåô</span>
                </button>
                <!-- ‚úÖ New Export Buttons -->
                <button id="exportPolygonBtn" class="control-btn" title="Exportar Pol√≠gono">
                    <i class="bi bi-vector-pen"></i>
                </button>
                <button id="exportCSVBtn" class="control-btn" title="Exportar CSV">
                    <i class="bi bi-filetype-csv"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Sidebar Left -->
    <div class="sidebar-left">
        <div class="sidebar-content">
            <div class="sidebar-tabs">
                <button class="tab-button active" data-tab="tab1">
                    <i class="bi bi-layers-fill"></i>
                    <span>Capas</span>
                </button>
                <button class="tab-button" data-tab="tab2">
                    <i class="bi bi-database-fill"></i>
                    <span>Datos</span>
                </button>
                <button class="tab-button" data-tab="tab3">
                    <i class="bi bi-graph-up"></i>
                    <span>An√°lisis</span>
                </button>
            </div>
            <div id="tab1" class="tab-content active">
                <div class="search-layers">
                    <i class="bi bi-search"></i>
                    <input type="text" placeholder="Buscar capas...">
                </div>
            </div>
            <div id="tab2" class="tab-content"></div>
            <div id="tab3" class="tab-content">
                <h3>Herramientas de An√°lisis</h3>
                <p>Herramientas de an√°lisis...</p>
            </div>
        </div>
    </div>
    <button class="sidebar-toggle">‚ò∞</button>

    <!-- Main Map Container -->
    <div id="map"></div>

    <!-- Footer Bar -->
    <footer class="footer-bar">
        <div class="footer-content">
            <div class="footer-section">
                <span>Scale: <span id="mapScale">1:10000</span></span>
            </div>
            <div class="footer-section">
                <span>Coordinates: <span id="currentCoords">14.0906, -87.2054</span></span>
                <div class="coord-input">
                    <input type="text" id="coordInput" placeholder="Go to coordinates">
                    <button id="goToCoord">Go</button>
                </div>
            </div>
            <div class="footer-section">
                <span>Zoom: <span id="currentZoom">6</span></span>
            </div>
            <div class="footer-section">
                <span>Puntos visibles: <span id="pointsCounter">0</span></span>
            </div>
        </div>
    </footer>

    <!-- Application Scripts -->
    <script src="js/welcome.js" type="module"></script>
    <script src="js/config.js" type="module"></script>
    <script src="js/core/ErrorHandler.js" type="module"></script>
    <script src="js/core/MapManager.js" type="module"></script>
    <script src="js/core/DataCore.js" type="module"></script>
    <script src="js/core/HeatmapCore.js" type="module"></script>
    <script src="js/core/HexagonCore.js" type="module"></script>
    <script src="js/core/StylePersistenceManager.js" type="module"></script>
    <script src="js/core/MapStateManager.js" type="module"></script>
    <script src="js/core/ThemeManager.js" type="module"></script>
    <script src="js/core/TrackingManager.js" type="module"></script>
    <script src="js/wfs/WFSLayerManager.js" type="module"></script>
    <script src="js/wfs/MunicipalityLayer.js" type="module"></script>
    <script src="js/dataLoader.js" type="module"></script>
    <script src="js/map.js" type="module"></script>
    <script src="js/measure.js" type="module"></script>
    <script src="js/sidebarleft.js" type="module"></script>
    <script src="js/behaviors.js" type="module"></script>
    <!-- ‚úÖ Added export modal -->
    <script src="js/components/exportModal.js" type="module"></script>
</body>
</html>
